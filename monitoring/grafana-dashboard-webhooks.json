{
  "id": null,
  "uid": "webhooks-node",
  "title": "Webhooks (Node) Overview",
  "tags": ["webhooks", "node"],
  "timezone": "browser",
  "schemaVersion": 38,
  "version": 1,
  "refresh": "10s",
  "time": { "from": "now-6h", "to": "now" },
  "panels": [
    {
      "type": "row",
      "title": "Listener",
      "gridPos": { "x": 0, "y": 0, "w": 24, "h": 1 }
    },
    {
      "type": "stat",
      "title": "Requests (5m rate)",
      "gridPos": { "x": 0, "y": 1, "w": 6, "h": 5 },
      "targets": [{
        "refId": "A",
        "expr": "sum(rate(webhook_requests_total[5m]))"
      }]
    },
    {
      "type": "stat",
      "title": "Invalid Signatures (5m rate)",
      "gridPos": { "x": 6, "y": 1, "w": 6, "h": 5 },
      "targets": [{
        "refId": "A",
        "expr": "sum(rate(webhook_invalid_signature_total[5m]))"
      }]
    },
    {
      "type": "stat",
      "title": "Replays (5m rate)",
      "gridPos": { "x": 12, "y": 1, "w": 6, "h": 5 },
      "targets": [{
        "refId": "A",
        "expr": "sum(rate(webhook_replay_total[5m]))"
      }]
    },
    {
      "type": "stat",
      "title": "Enqueued (5m rate)",
      "gridPos": { "x": 18, "y": 1, "w": 6, "h": 5 },
      "targets": [{
        "refId": "A",
        "expr": "sum(rate(webhook_enqueue_total[5m]))"
      }]
    },
    {
      "type": "timeseries",
      "title": "Handler Latency (Histogram P95/P99)",
      "gridPos": { "x": 0, "y": 6, "w": 24, "h": 8 },
      "targets": [
        {
          "refId": "A",
          "expr": "histogram_quantile(0.95, sum by (le) (rate(webhook_request_duration_seconds_bucket[5m])))",
          "legendFormat": "p95"
        },
        {
          "refId": "B",
          "expr": "histogram_quantile(0.99, sum by (le) (rate(webhook_request_duration_seconds_bucket[5m])))",
          "legendFormat": "p99"
        }
      ]
    },
    {
      "type": "row",
      "title": "Worker",
      "gridPos": { "x": 0, "y": 14, "w": 24, "h": 1 }
    },
    {
      "type": "stat",
      "title": "Processed (5m rate)",
      "gridPos": { "x": 0, "y": 15, "w": 6, "h": 5 },
      "targets": [{
        "refId": "A",
        "expr": "sum(rate(webhook_worker_processed_total[5m]))"
      }]
    },
    {
      "type": "stat",
      "title": "Retries (5m rate)",
      "gridPos": { "x": 6, "y": 15, "w": 6, "h": 5 },
      "targets": [{
        "refId": "A",
        "expr": "sum(rate(webhook_worker_retry_total[5m]))"
      }]
    },
    {
      "type": "stat",
      "title": "DLQ (5m rate)",
      "gridPos": { "x": 12, "y": 15, "w": 6, "h": 5 },
      "targets": [{
        "refId": "A",
        "expr": "sum(rate(webhook_worker_dlq_total[5m]))"
      }]
    },
    {
      "type": "stat",
      "title": "Deferred (5m rate)",
      "gridPos": { "x": 18, "y": 15, "w": 6, "h": 5 },
      "targets": [{
        "refId": "A",
        "expr": "sum(rate(webhook_worker_deferred_total[5m]))"
      }]
    }
  ],
  "templating": { "list": [] },
  "timepicker": { "refresh_intervals": ["5s","10s","30s","1m","5m","15m"] }
}
